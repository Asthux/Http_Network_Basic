# Http Network Basic



### 1. 웹과 네트워크의 기본

---

http의 탄생배경은 CERN에서 멀리 떨어져 있는 동료 연구자와 지식을 공용하게 할 수 있도록 시스템을 고안한 것에서 나왔다. 이것이 World Wide Web의 기본 개념이 되는것. 

TCP/IP는 서로 다른 하드웨어와 운영체제 등을 가지고 통신을 하기위한 규칙이다. 이러한 규칙을 프로토콜이라고 부르고 TCP/IP는 프로토콜의 집합이다.

TCP/IP에서 중요한 개념 중 하나가 계층(layer)이다. 4계층으로 나뉘어 있다.

- 애플리케이션 계층
- 트랜스포트 계층
- 네트워크 계층
- 링크 계층

각 계층은 연결되어 있는 부분만 결정되어 있어, 각 계층의 내부를 자유롭게 설계할 수 있고, 어딘가의 사양이 변경되었을 때, 전체를 바꾸지 않고 변경된 해당 계층만 바꾸면 되는 이득이 있다.

**애플리케이션 계층**은 유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임을 결정하고 있습니다. 

**트랜스포트 계층**은 애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공합니다. 서로 다른 성질을 가진 TCP와 UDP 두가지 프로토콜이 있습니다. 

**네트워크 계층(인터넷 계층)**은 네트워크 상에서 패킷의 이동을 다룹니다. 패킷이란 전송하는 데이터의 최소 단위입니다. 이 계층에서는 어떠한 경로를 거쳐 상대의 컴퓨터까지 패킷을 보낼지를 결정하기도 합니다. 인터넷의 경우라면 상대 컴퓨터에 도달하는 동안에 여러 대의 컴퓨터랑 네트워크 기기를 거쳐서 상대방에게 배송됩니다. 그러한 여러 가지 선택지 중에서 하나의 길을 결정하는 것이 네트워크 계층의 역할입니다.

**링크 계층(데이터 링크 계층, 네트워크 인터페이스 계층)**은 네트워크에 접속하는 하드웨어적인 면을 다룹니다. 운영체제가 하드웨어를 제어하기 때문에 디바이스 드라이버랑 네트워크 인터페이스 카드(NIC)를 포함합니다. 그리고 케이블 등과 같이 물리적으로 보이는 부분(커넥트 등을 포함한 여러 가지 전송 매체)도 포함합니다. 하드웨어적 측면은 모두 링크 계층의 역할입니다.

![Image Description](https://t1.daumcdn.net/cfile/tistory/99F730465E54A0DE24?original)

TCP/IP로 통신을 할 때 계층을 순서대로 거쳐 상대와 통신을 합니다. 송신측은 애플리케이션 계층부터 내려가고, 수신측은 링크 계층부터 애플리케이션 계층으로 올라갑니다. 각 계층을 거칠 때는 반드시 헤더로 불려지는 해당 계층마다 해당 계층에 필요한 정보를 추가합니다. 반대로 수신측에서는 각 계층을 거칠 때마다 반드시 해당 계층마다 사용한 헤더를 삭제합니다. 이렇게 정보를 감싸는 것을 캡슐화라고 부릅니다.

**IP/TCP/DNS**

배송을 담당하는 IP : IP(Internet Protocol)는 계층으로 말하자면 네트워크 층에 해당됩니다. IP와 IP 주소를 혼동하는 사람이 있는데 IP는 프로토콜의 명칭입니다. IP의 역할은 개개의 패킷을 상대방에게 전달하는 것입니다. 상대방에게 전달하기까지 여러 요소가 필요합니다. 그 중에서도 IP 주소와 MAC(Media Access Control Address)라는 요소가 중요합니다. IP 주소는 각 노드에 부여된 주소를 가리키고 MAC 주소는 각 네트워크 카드에 할당된 고유의 주소입니다. IP 주소는 MAC 주소와 결부됩니다. IP 주소는 변경 가능하지만 MAC 주소는 변경할 수 없습니다.

*통신은 ARP를 이용하여 MAC 주소에서 한다*

IP 통신은 MAC주소에 의존해서 통신을 합니다. 인터넷에서 통신 상대가 같은 랜선 내에 있을 경우는 적어서 여러 대의 컴퓨터와 네트워크 기기를 중계해서 상대방에게 도착합니다. 그렇게 중계하는 동안에는 다음으로 중계할 곳의 MAC 주소를 사용하여 목적지를 찾아가는 것입니다. 이때, ARP(Address Resolution Protocol)이라는 프로토콜이 사용됩니다. ARP는 주소를 해결하기 위한 프로토콜 중 하나인데, 수신지의 IP 주소를 바탕으로 MAC 주소를 조사할 수 있습니다. 

*그 누구도 인터넷 전체를 파악하고 있지는 않다*  

목적지까지 중계를 하는 도중에 컴퓨터와 라우터 등의 네트워크 기기는 목적지에 도착하기까지 대략적인 목적지만을 알고 있습니다.

신뢰성을 담당하는 TCP : TCP는 계층으로 말하자면 트랜스포트 층에 해당하는데, 신뢰성 있는 바이트 스트림 서비스를 제공합니다. 바이트 스트림 서비스란 용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리하는 것을 말하고, 신뢰성 있는 서비스는 상대방에게 보내는 서비스를 의미합니다. TCP는 대용량의 데이터를 보내기 쉽게 작게 분해하고, 정확하게 도착했는지 확인하는 역할을 담당하고 있습니다.

TCP는 "쓰리웨이 핸드셰이킹"이라는 방법을 사용해 확실하게 데이터를 보냈는지 검증합니다. 이 방법은 패킷을 보내고 나서 끝내는 것이 아니라, 보내졌는지 여부를 상대에게 확인하러 갑니다. 이것은 'SYN','ACK'라는 TCP 플래그를 사용합니다. 송신측에서는 최초 'SYN' 플래그로 상대에게 접속함과 동시에 패킷을 보내고, 수신측에서는 'SYN/ACK' 플래그로 송신측에 접속함과 동시에 패킷을 수신한 사실을 전합니다. 마지막으로 송신측이 'ACK' 플래그를 보내 패킷 교환이 완료되었음을 전합니다. 이 과정에서 어디선가 통신이 도중에 끊어지면 TCP는 그와 동시에 같은 수순으로 패킷을 재전송합니다. 

이름 해결을 담당하는 DNS : DNS는 HTTP와 같이 응용 계층 시스템에서 도메인 이름과 IP 주소 이름 확인을 제공합니다. 컴퓨터는 IP 주소와는 별개로 호스트 이름과 도메인 이름을 붙일 수 있습니다. "www.naver.com" 과 같이 적혀있습니다. 이런 방법이 인간과 더 친숙하기 때문입니다. 하지만 컴퓨터는 숫자를 나열하는 방법을 더 선호합니다. 이 문제를 해결하기 위해 DNS가 있습니다. DNS는 도메인명에서 IP 주소를 조사하거나 반대로 IP 주소로부터 도메인명을 조사하는 서비스를 제공하고 있습니다.

**각각과 HTTP와의 관계**

![img](https://velog.velcdn.com/images/lsh2613/post/d44ff1bb-149c-41ba-9780-1817e5d2292d/image.png)

**URI와 URL**

URI는 리소스 식별자고, URL은 웹 브라우저 등으로 웹 페이지를 표시하기 위해 입력하는 주소입니다.

URI는 리소스 식별자 : URI는 Uniform Resource Identifiers의 약자이지만, RFC2396에서는 각각의 단어가 다음과 같이 정의되어 있습니다

- Uniform

  통일된 서식을 결정하는 것으로, 여러 가지 종류의 리소스 지정 방법을 같은 맥락에서 구별없이 취급할 수 있게 합니다. 또한, 새로운 스키마 도입을 용이하게 합니다.

- Resource

  리소스는 '식별 가능한 모든 것'이라고 정의되어 있습니다. 도큐먼트 파일뿐만 아니라 이미지와 서비스 등 다른 것과 구별할 수 있는 것은 모두 리소스입니다. 또한 리소스는 단일한 부분만 아니라 복수의 집합도 리소스로 파악할 수 있습니다.

- Identifier

  식별 가능한 것을 참조하는 오브젝트이며 식별자로 불립니다. 결국, URI는 스키마를 나타내는 리소스를 식별하기 위한 식별자입니다. 스키마는 리소스를 얻기 위한 수단에 이름을 붙이는 방법입니다. HTTP의 경우에는 'http'를 사용합니다. 그 외에도 'ftp'와 'mailto', 'telnet', 'file'등이 있습니다.

URI는 리소스를 식별하기 위해 문자열 전반을 나타내는데 비해 URL은 리소스의 장소(네트워크 상의 위치)를 나타냅니다. URL은 URI의 서브셋입니다.

URI는 필요한 정보 전체를 지정하는 완전 수식 절대 URI 혹은 완전수식 절대 URL과 브라우저 중의 기준 URI에서 상대적 위치를 지정하는 상대 URL이 있습니다. URI포맷을 살펴보자면,

![img](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbRwQSW%2FbtqDEY4TAY8%2Fx34P5l3abLIKIpcy6gBBw1%2Fimg.png)

* 자격정보

  서버로부터 리소스를 취득하려면 자격정보(크리덴셜)가 필요합니다. 유저명과 패스워드를 지정할 수 있습니다. 이것은 옵션입니다.

* 서버주소

  완전 수식 형식인 URI에서는 서버 주소를 지정할 필요가 있습니다. 주소는 www.naver.com 과 같은 DNS 이름이나 "192.168.1.1"과 같은 IPv4 주소나 "[0:0:0:0:0:0:0:1]"과 같은 IPv6 주소를 대괄호로 묶어서 지정합니다.

* 서버포트

  서버의 접속 대상이 되는 네트워크 포트 번호를 지정합니다. 이것은 옵션이며 생략하면 디폴트 포트가 사용됩니다.

* 계층적 파일 패스

  특정 리소스를 식별하기 위해서 서버 상의 파일 패스를 지정합니다. UNIX 디렉토리 지정 방법과 비슷합니다.

* 쿼리 문자열

  파일 패스로 지정된 리소스에 임의의 파라미터를 넘겨주기 위해 쿼리 문자열을 사용합니다. 이것은 옵션입니다.

* 프래그멘트 식별자

  주로 취득한 리소스에서 서브 리소스(도큐먼트 중간에 위치)를 가리키기 위해서 프래그멘트 식별자가 사용됩니다. 이것은 옵션입니다.